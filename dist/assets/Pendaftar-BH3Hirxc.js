import{r as a,j as e,H as y,a as l}from"./app-By5Hh40n.js";import{A as w}from"./AuthenticatedLayout-BAjpHiDT.js";import{u as N,C as b}from"./ConfirmationModal-COAy8xRJ.js";import"./ApplicationLogo-DdyGRTVd.js";import"./transition-C0pXgCiI.js";function S({pendingVisits:o,flash:v}){const[d,m]=a.useState(o),[t,p]=a.useState(""),[u,r]=a.useState(!1),[n,c]=a.useState({}),[x,i]=a.useState(!1);N("dashboard",{"visitor.registered":s=>{console.log("âœ… Visitor baru terdaftar:",s.visitor),l.reload({only:["pendingVisits"]})},"visitor.checked-in":s=>{console.log("âœ… Visitor check-in:",s.visit),l.reload({only:["pendingVisits"]})},"visitor.cancelled":s=>{console.log("ðŸš« Visitor Cancelled:",s.visit),l.reload({only:["pendingVisits"]})}}),a.useEffect(()=>{m(o)},[o]);const g=s=>{c({title:"Manual Check-in",message:e.jsxs("div",{children:[e.jsx("p",{className:"mb-2",children:"Are you sure you want to check-in this visitor?"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-left text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s.visitor_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Institution:"})," ",s.institution]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Purpose:"})," ",s.purpose]})]})]}),type:"success",confirmText:"Yes, Check-in",onConfirm:()=>{i(!0),l.post(route("admin.visits.check-in",s.id),{},{onFinish:()=>{i(!1),r(!1)}})}}),r(!0)},f=s=>{c({title:"Cancel Visitor",message:e.jsxs("div",{children:[e.jsx("p",{className:"mb-2",children:"Are you sure you want to cancel this visitor registration?"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-left text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s.visitor_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Institution:"})," ",s.institution]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Cancelled visitors will still appear in reports."})]}),type:"danger",confirmText:"Yes, Cancel",onConfirm:()=>{i(!0),l.post(route("admin.visits.cancel",s.id),{},{onFinish:()=>{i(!1),r(!1)}})}}),r(!0)},h=d.filter(s=>s.visitor_name.toLowerCase().includes(t.toLowerCase())||s.institution.toLowerCase().includes(t.toLowerCase())||s.phone.includes(t)||s.purpose.toLowerCase().includes(t.toLowerCase()));return e.jsxs(w,{header:e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-yellow-50 p-3 rounded-2xl",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Daftar Pendaftar"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Visitor yang sudah mendaftar tapi belum check-in"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"bg-yellow-50 px-4 py-2 rounded-xl border border-yellow-200",children:e.jsxs("span",{className:"text-sm font-semibold text-yellow-700",children:[d.length," Pendaftar"]})})})]}),children:[e.jsx(y,{title:"Pendaftar"}),e.jsx("div",{className:"py-12 bg-gray-50 min-h-screen",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-2xl border border-gray-100",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Cari nama, instansi, telepon, atau tujuan...",value:t,onChange:s=>p(s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl leading-5 bg-gray-50 placeholder-gray-400 focus:outline-none focus:bg-white focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200 transition-all"})]})}),e.jsx("div",{className:"overflow-x-auto",children:h.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Instansi"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Kontak"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Tujuan"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Waktu Daftar"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:h.map((s,j)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium",children:j+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:s.visitor_name}),s.is_urgent?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-red-100 text-red-700 border border-red-200",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Urgent"]}):null]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-medium",children:s.institution}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.phone]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.email]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:s.purpose})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.registered_at).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-700 border border-yellow-200",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),"Pending"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>g(s),className:"w-full inline-flex items-center justify-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-[10px] font-bold rounded-lg transition-all active:scale-95 shadow-sm",children:"Check-in"}),e.jsx("button",{onClick:()=>f(s),className:"w-full inline-flex items-center justify-center px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-[10px] font-bold rounded-lg transition-all active:scale-95 shadow-sm",children:"Cancelled"})]})})]},s.id))})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-4 text-gray-500 text-sm font-medium",children:t?"Tidak ada hasil yang cocok dengan pencarian":"Belum ada pendaftar yang menunggu check-in"})]})})]})})}),e.jsx(b,{show:u,onClose:()=>!x&&r(!1),onConfirm:n.onConfirm,title:n.title,message:n.message,type:n.type,confirmText:n.confirmText,processing:x})]})}export{S as default};

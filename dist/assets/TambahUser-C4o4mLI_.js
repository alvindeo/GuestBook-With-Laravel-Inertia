import{u as v,r as c,a as b,j as e,H as N}from"./app-By5Hh40n.js";import{A as k}from"./AuthenticatedLayout-BAjpHiDT.js";import"./ApplicationLogo-DdyGRTVd.js";import"./transition-C0pXgCiI.js";function M({flash:l}){const{data:r,setData:n,post:p,processing:u,errors:a,reset:i}=v({name:"",email:"",phone:"",institution:"",purpose:""}),[g,d]=c.useState(!1),[m,x]=c.useState(4);c.useEffect(()=>{if(l!=null&&l.success){d(!0),i(),x(4);const s=setInterval(()=>{x(t=>t<=1?(clearInterval(s),b.reload({only:[]}),d(!1),0):t-1)},1e3);return()=>clearInterval(s)}},[l,i]);const j=s=>{s.preventDefault(),p(route("tambah-user.store"))},f=async s=>{const t=s.target.value;if(n("phone",t),t.length>=10)try{const o=await(await fetch(`/check-visitor/${t}`)).json();o&&n({...r,phone:t,name:o.name||"",email:o.email||"",institution:o.institution||""})}catch(h){console.error("Error checking visitor:",h)}};return e.jsxs(k,{header:e.jsx("div",{className:"flex justify-between items-center bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-50 p-3 rounded-2xl",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Tambah Pengunjung"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tambahkan pengunjung baru ke dalam sistem"})]})]})}),children:[e.jsx(N,{title:"Tambah Pengunjung"}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 transform animate-scale-in",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 flex items-center justify-center animate-bounce-once",children:e.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Berhasil! ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600",children:"Admin berhasil menambahkan pengunjung"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Halaman akan refresh dalam ",e.jsx("span",{className:"font-bold text-lg",children:m})," detik"]})]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-1000 ease-linear",style:{width:`${(4-m)*25}%`}})}),e.jsx("button",{onClick:()=>{d(!1),b.reload({only:[]})},className:"w-full bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all shadow-lg",children:"Tutup & Refresh Sekarang"})]})}),e.jsx("div",{className:"py-12 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-3xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-2xl border border-gray-100",children:e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-bold text-gray-700 mb-2",children:["Nomor Telepon ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone",value:r.phone,onChange:f,className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"08123456789",required:!0}),a.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Data akan otomatis terisi jika nomor sudah terdaftar"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-bold text-gray-700 mb-2",children:["Nama Lengkap ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:r.name,onChange:s=>n("name",s.target.value),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Masukkan nama lengkap anda",required:!0}),a.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",value:r.email,onChange:s=>n("email",s.target.value),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"nama@email.com",required:!0}),a.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"institution",className:"block text-sm font-bold text-gray-700 mb-2",children:["Instansi/Perusahaan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"institution",value:r.institution,onChange:s=>n("institution",s.target.value),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Nama instansi/perusahaan",required:!0}),a.institution&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.institution})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"purpose",className:"block text-sm font-bold text-gray-700 mb-2",children:["Tujuan Kunjungan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"purpose",value:r.purpose,onChange:s=>n("purpose",s.target.value),rows:"4",className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:"Jelaskan tujuan kunjungan Anda...",required:!0}),a.purpose&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.purpose})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:u,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah Pengunjung"]})}),e.jsx("button",{type:"button",onClick:()=>i(),className:"px-6 py-3 border border-gray-300 rounded-xl font-bold text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all",children:"Reset"})]})]})})}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-blue-900 mb-1",children:"Informasi"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["â€¢ Pengunjung yang ditambahkan akan masuk ke daftar ",e.jsx("strong",{children:"Pendaftar"})," dengan status ",e.jsx("strong",{children:"Pending"})]}),e.jsxs("li",{children:["â€¢ Scan QR code untuk mengubah status menjadi ",e.jsx("strong",{children:"Check-in"})]}),e.jsx("li",{children:"â€¢ Data akan otomatis terisi jika nomor telepon sudah terdaftar"})]})]})]})})]})})]})}export{M as default};

import{j as e,r as d,H as L,L as D}from"./app-By5Hh40n.js";import{A as S}from"./AuthenticatedLayout-BAjpHiDT.js";import"./ApplicationLogo-DdyGRTVd.js";import"./transition-C0pXgCiI.js";function _({status:u}){const a={pending:{label:"Pending",bgColor:"bg-yellow-100",textColor:"text-yellow-700",borderColor:"border-yellow-200",icon:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})},in:{label:"Guest Inside",bgColor:"bg-blue-100",textColor:"text-blue-700",borderColor:"border-blue-200",icon:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})},out:{label:"Checked Out",bgColor:"bg-green-100",textColor:"text-green-700",borderColor:"border-green-200",icon:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},cancelled:{label:"Cancelled",bgColor:"bg-red-100",textColor:"text-red-700",borderColor:"border-red-200",icon:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}},o=a[u]||a.pending;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold border ${o.bgColor} ${o.textColor} ${o.borderColor}`,children:[o.icon,o.label]})}function R({visits:u}){const[a,o]=d.useState(""),[r,b]=d.useState("daily"),[i,p]=d.useState(""),[s,g]=d.useState(""),[l,y]=d.useState("");d.useEffect(()=>{window.Echo.channel("new-guest").listen("GuestCheckedIn",t=>{console.log("Tamu baru datang:",t.guest)})},[]);const f=u.filter(t=>{var j,w,v,N,k;const h=new Date(t.created_at),n=h.toISOString().split("T")[0],m=((w=(j=t.visitor)==null?void 0:j.name)==null?void 0:w.toLowerCase().includes(a.toLowerCase()))||((N=(v=t.visitor)==null?void 0:v.institution)==null?void 0:N.toLowerCase().includes(a.toLowerCase()))||((k=t.purpose)==null?void 0:k.toLowerCase().includes(a.toLowerCase()));let c=!0;if(r==="daily"&&i)c=n===i;else if(r==="weekly"&&s&&l)c=n>=s&&n<=l;else if(r==="monthly"&&s&&l){const x=n.substring(0,7);c=x>=s&&x<=l}else if(r==="yearly"&&s&&l){const x=h.getFullYear().toString();c=x>=s&&x<=l}return m&&c}),C=()=>{o(""),p(""),g(""),y(""),b("daily")};return e.jsxs(S,{header:e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Visit Reports"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Complete history of Telkom visitor data"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:route("laporan.excel",{search:a,type:r,date:i,start:s,end:l}),className:"inline-flex items-center gap-2 rounded-xl bg-green-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-700 transition-all active:scale-95",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]}),e.jsxs("a",{href:route("laporan.pdf",{search:a,type:r,date:i,start:s,end:l}),className:"inline-flex items-center gap-2 rounded-xl bg-red-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-red-700 transition-all active:scale-95",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF"]})]})]}),children:[e.jsx(L,{title:"Visit Reports"}),e.jsx("div",{className:"py-12 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-t-2xl border-x border-t border-gray-100 space-y-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:a,onChange:t=>o(t.target.value),placeholder:"Search name, institution, or purpose...",className:"block w-full pl-10 pr-3 py-2 border border-gray-200 rounded-xl leading-5 bg-gray-50 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 sm:text-sm transition-all"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("select",{value:r,onChange:t=>{b(t.target.value),p(""),g(""),y("")},className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]}),r==="daily"&&e.jsx("input",{type:"date",value:i,onChange:t=>p(t.target.value),className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all"}),r!=="daily"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:r==="yearly"?"number":r==="monthly"?"month":"date",placeholder:"Mulai",value:s,onChange:t=>g(t.target.value),className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"s/d"}),e.jsx("input",{type:r==="yearly"?"number":r==="monthly"?"month":"date",placeholder:"Selesai",value:l,onChange:t=>y(t.target.value),className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all"})]}),(a||i||s||l)&&e.jsx("button",{onClick:C,className:"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors rounded-xl shrink-0 border border-transparent hover:border-red-100",children:"Reset"})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm border border-gray-100 rounded-b-2xl",children:e.jsx("div",{className:"text-gray-900",children:f&&f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Visitor"}),e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Purpose"}),e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Check-in"}),e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Check-out"}),e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-4 text-left text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:f.map((t,h)=>{var n,m;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium",children:h+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx(D,{href:route("visitor.history",t.visitor_id),className:"text-sm font-bold text-gray-900 uppercase hover:text-red-600 transition-colors",children:(n=t.visitor)==null?void 0:n.name}),e.jsx("div",{className:"text-[10px] text-gray-400 font-medium uppercase",children:(m=t.visitor)==null?void 0:m.institution})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.purpose}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.check_in_at?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:new Date(t.check_in_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[new Date(t.check_in_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})," WIB"]})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"Not Checked-in"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.check_out_at?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:new Date(t.check_out_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[new Date(t.check_out_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})," WIB"]})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-medium",children:t.duration_minutes!==null?`${t.duration_minutes}m`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(_,{status:t.status})})]},t.id)})})]})}):e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-50 mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-gray-400 text-sm italic font-medium",children:"Tidak ada data yang cocok dengan pencarian Anda."})]})})})]})})]})}export{R as default};
